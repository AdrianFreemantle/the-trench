# ArgoCD Helm values for internal deployment
# Chart: argo-cd from https://argoproj.github.io/argo-helm

global:
  domain: argocd.trench.internal

  nodeSelector:
    workload: platform

  tolerations:
    - key: 'workload'
      operator: 'Equal'
      value: 'platform'
      effect: 'NoSchedule'

server:
  # Disable TLS since we're using HTTP Ingress
  insecure: true

  # Service configuration
  service:
    type: ClusterIP

  # Ingress handled separately via k8s/base/infra/ingress-argocd.yaml
  ingress:
    enabled: false

  # Resource limits
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 250m
      memory: 256Mi

  nodeSelector:
    workload: platform

  tolerations:
    - key: 'workload'
      operator: 'Equal'
      value: 'platform'
      effect: 'NoSchedule'

# Resource limits for dev environment
controller:
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 500m
      memory: 512Mi

  nodeSelector:
    workload: platform

  tolerations:
    - key: 'workload'
      operator: 'Equal'
      value: 'platform'
      effect: 'NoSchedule'

repoServer:
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 250m
      memory: 256Mi

  nodeSelector:
    workload: platform

  tolerations:
    - key: 'workload'
      operator: 'Equal'
      value: 'platform'
      effect: 'NoSchedule'

# Disable HA for dev
redis-ha:
  enabled: false

redis:
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 100m
      memory: 128Mi

  nodeSelector:
    workload: platform

  tolerations:
    - key: 'workload'
      operator: 'Equal'
      value: 'platform'
      effect: 'NoSchedule'
