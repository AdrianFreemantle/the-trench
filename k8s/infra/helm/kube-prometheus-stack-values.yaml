grafana:
  enabled: true
  service:
    type: ClusterIP
  resources:
    requests:
      cpu: 50m
      memory: 128Mi

  nodeSelector:
    workload: platform

  tolerations:
    - key: 'workload'
      operator: 'Equal'
      value: 'platform'
      effect: 'NoSchedule'

prometheus:
  prometheusSpec:
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
    nodeSelector:
      workload: platform
    tolerations:
      - key: 'workload'
        operator: 'Equal'
        value: 'platform'
        effect: 'NoSchedule'
    retention: 2d
    # Watch ServiceMonitors in all namespaces
    serviceMonitorSelectorNilUsesHelmValues: false
    serviceMonitorNamespaceSelector: {}

alertmanager:
  enabled: true
  alertmanagerSpec:
    nodeSelector:
      workload: platform
    tolerations:
      - key: 'workload'
        operator: 'Equal'
        value: 'platform'
        effect: 'NoSchedule'

prometheusOperator:
  nodeSelector:
    workload: platform
  tolerations:
    - key: 'workload'
      operator: 'Equal'
      value: 'platform'
      effect: 'NoSchedule'

kube-state-metrics:
  nodeSelector:
    workload: platform
  tolerations:
    - key: 'workload'
      operator: 'Equal'
      value: 'platform'
      effect: 'NoSchedule'

# node-exporter is a DaemonSet that must run on ALL nodes to collect node metrics.
# It needs tolerations for all node taints but no nodeSelector restriction.
prometheus-node-exporter:
  tolerations:
    - key: 'CriticalAddonsOnly'
      operator: 'Equal'
      value: 'true'
      effect: 'NoSchedule'
    - key: 'workload'
      operator: 'Equal'
      value: 'apps'
      effect: 'NoSchedule'
    - key: 'workload'
      operator: 'Equal'
      value: 'platform'
      effect: 'NoSchedule'
